{% extends "layout.html" %}

{% block title %}Local Music Management - TuneForge{% endblock %}

{% block content %}
<div class="main-container">
    <div class="content-header">
        <h1>Local Music Management</h1>
        <p class="subtitle">Index and search your local music collection</p>
    </div>
    
    <!-- Statistics Dashboard -->
    <div class="stats-grid">
        <div class="stat-box">
            <div class="stat-icon">MUSIC</div>
            <div class="stat-content">
                <h3>Total Tracks</h3>
                <p class="stat-number" id="total-tracks">{{ stats.total_tracks }}</p>
            </div>
        </div>
        <div class="stat-box">
            <div class="stat-icon">DISK</div>
            <div class="stat-content">
                <h3>Total Size</h3>
                <p class="stat-number" id="total-size">{{ stats.total_size | filesizeformat }}</p>
            </div>
        </div>
        <div class="stat-box">
            <div class="stat-icon">USERS</div>
            <div class="stat-content">
                <h3>Unique Artists</h3>
                <p class="stat-number" id="unique-artists">{{ stats.artists }}</p>
            </div>
        </div>
        <div class="stat-box">
            <div class="stat-icon">GENRE</div>
            <div class="stat-content">
                <h3>Genres</h3>
                <p class="stat-number" id="genres-count">{{ stats.genres | length }}</p>
            </div>
        </div>
    </div>

    <!-- Folder Scanning Section -->
    <div class="content-section">
        <div class="section-header">
            <h2>Index Music Folder</h2>
            <p>Select a folder to scan and index your music collection</p>
        </div>
        
        <div class="folder-selector">
            <div class="folder-input-group">
                <input type="text" id="music-folder" placeholder="Enter the full path to your music folder (e.g., /home/user/Music)" class="folder-input">
                <button id="browse-folder-btn" class="browse-btn">Browse</button>
            </div>
            <div class="folder-help">
                <p>üí° <strong>Tip:</strong> You can either type the path manually or use the Browse button to select a folder and then edit the path if needed.</p>
            </div>
            <button id="scan-folder-btn" class="primary-button">Scan Folder</button>
        </div>
        
        <div id="scan-progress" class="scan-progress" style="display: none;">
            <div class="progress-indicator">
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
            </div>
            <p id="scan-status" class="scan-status">Scanning...</p>
        </div>
    </div>

    <!-- Search Section -->
    <div class="content-section">
        <div class="section-header">
            <h2>Search Local Tracks</h2>
            <p>Find tracks in your indexed music collection</p>
        </div>
        
        <div class="search-container">
            <div class="search-input-group">
                <input type="text" id="search-query" placeholder="Search for tracks, artists, or albums..." class="search-input">
                <button id="search-btn" class="secondary-button">Search</button>
            </div>
        </div>
        <div id="search-results" class="search-results"></div>
    </div>

    <!-- Genre Breakdown -->
    <div class="content-section">
        <div class="section-header">
            <h2>Genre Breakdown</h2>
            <p>Explore the musical diversity in your collection</p>
        </div>
        <div id="genre-breakdown" class="genre-breakdown">
            {% for genre in stats.genres %}
            <span class="genre-tag">{{ genre }}</span>
            {% endfor %}
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const scanFolderBtn = document.getElementById('scan-folder-btn');
    const browseFolderBtn = document.getElementById('browse-folder-btn');
    const searchBtn = document.getElementById('search-btn');
    const scanProgress = document.getElementById('scan-progress');
    const scanStatus = document.getElementById('scan-status');
    const searchResults = document.getElementById('search-results');
    const musicFolderInput = document.getElementById('music-folder');

    // File browser functionality
    browseFolderBtn.addEventListener('click', function() {
        console.log('Browse button clicked - opening file browser');
        openFileBrowser();
    });

    // Open the file browser modal
    function openFileBrowser() {
        const modal = document.createElement('div');
        modal.className = 'file-browser-overlay';
        modal.innerHTML = `
            <div class="file-browser-modal">
                <div class="file-browser-header">
                    <h3>Select Music Folder</h3>
                    <button class="close-btn" onclick="this.closest('.file-browser-overlay').remove()">&times;</button>
                </div>
                <div class="file-browser-content">
                    <div class="current-path">
                        <span id="current-path-display">Loading...</span>
                    </div>
                    <div class="file-browser-navigation">
                        <button id="parent-dir-btn" class="nav-btn" disabled>‚Üë Parent Directory</button>
                        <button id="home-dir-btn" class="nav-btn">üè† Home</button>
                    </div>
                    <div class="file-browser-list" id="file-browser-list">
                        <div class="loading">Loading directory contents...</div>
                    </div>
                </div>
                <div class="file-browser-footer">
                    <button id="select-current-path" class="primary-button" disabled>Select This Folder</button>
                    <button class="secondary-button" onclick="this.closest('.file-browser-overlay').remove()">Cancel</button>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        // Load initial directory (home directory)
        loadDirectory('');
        
        // Set up event listeners
        setupFileBrowserEvents(modal);
    }

    // Set up file browser event listeners
    function setupFileBrowserEvents(modal) {
        // Parent directory button
        modal.querySelector('#parent-dir-btn').addEventListener('click', function() {
            const currentPath = modal.querySelector('#current-path-display').textContent;
            if (currentPath && currentPath !== '/') {
                const parentPath = currentPath.split('/').slice(0, -1).join('/') || '/';
                loadDirectory(parentPath);
            }
        });
        
        // Home directory button
        modal.querySelector('#home-dir-btn').addEventListener('click', function() {
            loadDirectory('');
        });
        
        // Select current path button
        modal.querySelector('#select-current-path').addEventListener('click', function() {
            const currentPath = modal.querySelector('#current-path-display').textContent;
            if (currentPath) {
                musicFolderInput.value = currentPath;
                modal.remove();
            }
        });
    }

    // Load directory contents
    function loadDirectory(path) {
        const modal = document.querySelector('.file-browser-overlay');
        if (!modal) return;
        
        const listElement = modal.querySelector('#file-browser-list');
        const currentPathDisplay = modal.querySelector('#current-path-display');
        const parentDirBtn = modal.querySelector('#parent-dir-btn');
        const selectBtn = modal.querySelector('#select-current-path');
        
        // Show loading state
        listElement.innerHTML = '<div class="loading">Loading directory contents...</div>';
        
        // Make API call to browse path
        fetch(`/api/browse-path?path=${encodeURIComponent(path)}`)
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    listElement.innerHTML = `<div class="error">Error: ${data.error}</div>`;
                    return;
                }
                
                // Update current path display
                currentPathDisplay.textContent = data.current_path;
                
                // Enable/disable parent directory button
                parentDirBtn.disabled = !data.parent_path;
                
                // Enable select button
                selectBtn.disabled = false;
                
                // Build directory listing
                let html = '';
                
                // Add parent directory if available
                if (data.parent_path) {
                    html += `<div class="directory-item parent-dir" data-path="${data.parent_path}">
                        <span class="dir-icon">üìÅ</span>
                        <span class="dir-name">.. (Parent Directory)</span>
                    </div>`;
                }
                
                // Add directories
                data.directories.forEach(dir => {
                    html += `<div class="directory-item" data-path="${dir.path}">
                        <span class="dir-icon">üìÅ</span>
                        <span class="dir-name">${dir.name}</span>
                        ${!dir.readable ? '<span class="permission-warning">‚ö†Ô∏è</span>' : ''}
                    </div>`;
                });
                
                // Add files (if any)
                if (data.files.length > 0) {
                    html += '<div class="files-section"><h4>Audio Files Found:</h4>';
                    data.files.forEach(file => {
                        const size = formatFileSize(file.size);
                        html += `<div class="file-item">
                            <span class="file-icon">üéµ</span>
                            <span class="file-name">${file.name}</span>
                            <span class="file-size">${size}</span>
                        </div>`;
                    });
                    html += '</div>';
                }
                
                // Show performance info
                if (data.performance_info) {
                    const perf = data.performance_info;
                    html += '<div class="performance-info">';
                    html += `<p><strong>Directory Summary:</strong> ${perf.directories_count} folders, ${perf.files_scanned} audio files`;
                    if (perf.note) {
                        html += `<br><em>${perf.note}</em>`;
                    }
                    html += '</p>';
                    html += '</div>';
                }
                
                // Show message if no directories
                if (data.directories.length === 0 && data.files.length === 0) {
                    html += '<div class="empty-dir">This directory is empty</div>';
                }
                
                listElement.innerHTML = html;
                
                // Add click handlers for directories
                listElement.querySelectorAll('.directory-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const dirPath = this.dataset.path;
                        if (dirPath) {
                            loadDirectory(dirPath);
                        }
                    });
                });
            })
            .catch(error => {
                console.error('Error loading directory:', error);
                listElement.innerHTML = '<div class="error">Error loading directory contents</div>';
            });
    }

    // Helper function to format file sizes
    function formatFileSize(bytes) {
        if (bytes === 0) return '0 B';
        const k = 1024;
        const sizes = ['B', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
    }

    // Enable scan button when there's text in the input
    musicFolderInput.addEventListener('input', function() {
        scanFolderBtn.disabled = !this.value.trim();
    });

                    // Scan folder functionality
                scanFolderBtn.addEventListener('click', async function() {
                    const folderPath = musicFolderInput.value.trim();
                    if (!folderPath) {
                        alert('Please select a folder first');
                        return;
                    }
            
                    scanFolderBtn.disabled = true;
                    browseFolderBtn.disabled = true;
                    scanProgress.style.display = 'block';
                    scanStatus.textContent = 'Starting scan...';
            
                    try {
                        const response = await fetch('/api/scan-music-folder', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ folder_path: folderPath })
                        });
            
                        const result = await response.json();
                        
                        if (result.success && result.scan_id) {
                            // Add scan to global status manager
                            window.globalStatusManager.addScan(result.scan_id, folderPath);
                            scanStatus.textContent = 'Scan started - check sidebar for progress';
                            scanFolderBtn.disabled = false;
                            browseFolderBtn.disabled = false;
                        } else {
                            scanStatus.textContent = `Error: ${result.error || 'Unknown error'}`;
                            scanFolderBtn.disabled = false;
                            browseFolderBtn.disabled = false;
                        }
                    } catch (error) {
                        scanStatus.textContent = `Error: ${error.message}`;
                        scanFolderBtn.disabled = false;
                        browseFolderBtn.disabled = false;
                    }
                });



    // Search functionality
    searchBtn.addEventListener('click', performSearch);
    document.getElementById('search-query').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            performSearch();
        }
    });

    async function performSearch() {
        const query = document.getElementById('search-query').value.trim();
        if (!query) {
            alert('Please enter a search query');
            return;
        }

        searchBtn.disabled = true;
        searchResults.innerHTML = '<p>Searching...</p>';

        try {
            const response = await fetch('/api/search-local-tracks', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ query: query, limit: 100 })
            });

            const result = await response.json();
            
            if (result.success) {
                displaySearchResults(result.results);
            } else {
                searchResults.innerHTML = `<p>Error: ${result.error}</p>`;
            }
        } catch (error) {
            searchResults.innerHTML = `<p>Error: ${error.message}</p>`;
        } finally {
            searchBtn.disabled = false;
        }
    }

    function displaySearchResults(tracks) {
        if (tracks.length === 0) {
            searchResults.innerHTML = '<p>No tracks found matching your search.</p>';
            return;
        }

        const resultsHtml = tracks.map(track => `
            <div class="track-item">
                <div class="track-info">
                    <h4>${track.title}</h4>
                    <p class="track-artist">${track.artist}</p>
                    <p class="track-album">${track.album}</p>
                    ${track.genre ? `<span class="track-genre">${track.genre}</span>` : ''}
                    ${track.year ? `<span class="track-year">${track.year}</span>` : ''}
                </div>
                <div class="track-details">
                    ${track.duration ? `<span class="track-duration">${formatDuration(track.duration)}</span>` : ''}
                    <span class="track-path">${track.file_path}</span>
                </div>
            </div>
        `).join('');

        searchResults.innerHTML = `
            <h3>Found ${tracks.length} tracks:</h3>
            <div class="tracks-list">
                ${resultsHtml}
            </div>
        `;
    }

    function formatDuration(seconds) {
        if (!seconds) return '';
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = Math.floor(seconds % 60);
        return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
    }

    function updateStats(stats) {
        document.getElementById('total-tracks').textContent = stats.indexed;
        // Note: We'd need to fetch updated stats to get accurate size/artist/genre counts
        // For now, just update the tracks count
    }
});
</script>

<style>
/* Main Container */
.main-container {
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

.content-header {
    text-align: center;
    margin-bottom: 2rem;
}

.content-header h1 {
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    font-size: 2.5rem;
}

.subtitle {
    color: var(--text-secondary);
    font-size: 1.1rem;
    margin: 0;
}

/* Statistics Grid */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.stat-box {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: transform 0.2s, box-shadow 0.2s;
}

.stat-box:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.stat-icon {
    font-size: 2.5rem;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--accent-color);
    border-radius: 50%;
    color: white;
}

.stat-content h3 {
    color: var(--text-secondary);
    margin: 0 0 0.5rem 0;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-number {
    color: var(--text-primary);
    font-size: 1.8rem;
    font-weight: bold;
    margin: 0;
}

/* Content Sections */
.content-section {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 2rem;
}

.section-header {
    margin-bottom: 1.5rem;
}

.section-header h2 {
    color: var(--text-primary);
    margin: 0 0 0.5rem 0;
    font-size: 1.5rem;
}

.section-header p {
    color: var(--text-secondary);
    margin: 0;
    font-size: 1rem;
}

/* Folder Selector */
.folder-selector {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.folder-help {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    margin: 0.5rem 0;
}

.folder-help p {
    margin: 0;
    color: var(--text-secondary);
    font-size: 0.9rem;
    line-height: 1.4;
}

.folder-input-group {
    display: flex;
    gap: 0.5rem;
}

.folder-input {
    flex: 1;
    padding: 0.75rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--bg-primary);
    color: var(--text-primary);
    font-size: 1rem;
    cursor: not-allowed;
}

.folder-input:focus {
    outline: none;
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(var(--accent-color-rgb), 0.1);
}

.browse-btn {
    padding: 0.75rem 1.5rem;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.2s;
}

.browse-btn:hover {
    background: var(--bg-hover);
    border-color: var(--accent-color);
}

/* Buttons */
.primary-button, .secondary-button {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
    display: inline-block;
}

.primary-button {
    background: var(--accent-color);
    color: white;
}

.primary-button:hover:not(:disabled) {
    background: var(--accent-hover);
    transform: translateY(-1px);
}

.primary-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

.secondary-button {
    background: var(--bg-primary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}

.secondary-button:hover {
    background: var(--bg-hover);
    border-color: var(--accent-color);
}

/* Progress Indicator */
.scan-progress {
    margin-top: 1.5rem;
    text-align: center;
}

.progress-indicator {
    margin-bottom: 1rem;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: var(--border-color);
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    width: 100%;
    height: 100%;
    background: var(--accent-color);
    animation: progress-animation 2s ease-in-out infinite;
}

@keyframes progress-animation {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.scan-status {
    color: var(--text-secondary);
    margin: 0;
    font-size: 0.9rem;
}

/* Search Container */
.search-container {
    margin-bottom: 1.5rem;
}

.search-input-group {
    display: flex;
    gap: 0.5rem;
}

.search-input {
    flex: 1;
    padding: 0.75rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--bg-primary);
    color: var(--text-primary);
    font-size: 1rem;
}

.search-input:focus {
    outline: none;
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(var(--accent-color-rgb), 0.1);
}

/* Search Results */
.search-results {
    margin-top: 1.5rem;
}

.tracks-list {
    max-height: 500px;
    overflow-y: auto;
}

.track-item {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 1rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 0.75rem;
    background: var(--bg-primary);
    transition: all 0.2s;
}

.track-item:hover {
    border-color: var(--accent-color);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.track-info h4 {
    margin: 0 0 0.5rem 0;
    color: var(--text-primary);
    font-size: 1.1rem;
}

.track-artist {
    color: var(--text-secondary);
    margin: 0 0 0.25rem 0;
    font-weight: 500;
}

.track-album {
    color: var(--text-muted);
    margin: 0 0 0.75rem 0;
    font-size: 0.9rem;
}

.track-genre, .track-year {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.8rem;
    margin-right: 0.5rem;
    font-weight: 500;
}

.track-genre {
    background: var(--accent-color);
    color: white;
}

.track-year {
    background: var(--success-color);
    color: white;
}

.track-details {
    text-align: right;
    font-size: 0.9rem;
}

.track-duration {
    display: block;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.track-path {
    color: var(--text-muted);
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.8rem;
    word-break: break-all;
    max-width: 300px;
    line-height: 1.4;
}

/* Genre Breakdown */
.genre-breakdown {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
}

.genre-tag {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.9rem;
    border: 1px solid var(--border-color);
    transition: all 0.2s;
}

.genre-tag:hover {
    background: var(--accent-color);
    color: white;
    border-color: var(--accent-color);
    transform: translateY(-1px);
}

/* File Browser Modal */
.file-browser-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.file-browser-modal {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    width: 90%;
    max-width: 800px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}

.file-browser-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    border-bottom: 1px solid var(--border-color);
}

.file-browser-header h3 {
    margin: 0;
    color: var(--text-primary);
    font-size: 1.3rem;
}

.close-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all 0.2s;
}

.close-btn:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.file-browser-content {
    flex: 1;
    padding: 1.5rem;
    overflow-y: auto;
}

.current-path {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.9rem;
    color: var(--text-primary);
    word-break: break-all;
}

.file-browser-navigation {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.nav-btn {
    padding: 0.5rem 1rem;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-primary);
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.nav-btn:hover:not(:disabled) {
    background: var(--bg-hover);
    border-color: var(--accent-color);
}

.nav-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.file-browser-list {
    min-height: 300px;
}

.loading, .error, .empty-dir {
    text-align: center;
    padding: 2rem;
    color: var(--text-secondary);
}

.error {
    color: #dc3545;
}

.directory-item, .file-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    border: 1px solid transparent;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
}

.directory-item:hover {
    background: var(--bg-hover);
    border-color: var(--accent-color);
}

.directory-item.parent-dir {
    background: var(--bg-primary);
    border-color: var(--border-color);
}

.dir-icon, .file-icon {
    font-size: 1.2rem;
    width: 24px;
    text-align: center;
}

.dir-name, .file-name {
    flex: 1;
    color: var(--text-primary);
    font-weight: 500;
}

.file-size {
    color: var(--text-secondary);
    font-size: 0.9rem;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
}

.permission-warning {
    color: #ffc107;
    font-size: 1rem;
}

.files-section {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border-color);
}

.files-section h4 {
    margin: 0 0 0.75rem 0;
    color: var(--text-secondary);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.performance-info {
    margin-top: 1rem;
    padding: 0.75rem;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 0.85rem;
}

.performance-info p {
    margin: 0;
    color: var(--text-secondary);
    line-height: 1.4;
}

.performance-info strong {
    color: var(--text-primary);
}

.performance-info em {
    color: var(--accent-color);
    font-style: italic;
}

.file-browser-footer {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    padding: 1.5rem;
    border-top: 1px solid var(--border-color);
}

/* Responsive Design */
@media (max-width: 768px) {
    .main-container {
        padding: 1rem;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .folder-input-group {
        flex-direction: column;
    }
    
    .search-input-group {
        flex-direction: column;
    }
    
    .track-item {
        flex-direction: column;
        gap: 1rem;
    }
    
    .track-details {
        text-align: left;
    }
}
</style>
{% endblock %}
